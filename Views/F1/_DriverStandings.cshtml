@using AvikstromPortfolio
@using AvikstromPortfolio.Models
@using AvikstromPortfolio.Models.F1
@using AvikstromPortfolio.Services
@using AvikstromPortfolio.Services.F1
@model DriverStandingsWrapper

@if (Model?.DriverStandings != null && Model.DriverStandings.Any())
{
    var seasonLabel = string.IsNullOrEmpty(Model.Season) ? "DRIVERS' STANDINGS" : $"{Model.Season} DRIVERS' STANDINGS";

    <div class="card f1-table">
        <div class="card-body">
            <h2 class="card-title text-center f1-uppercase">@seasonLabel</h2>
            <table class="table text-nowrap">
                <thead>
                    <tr class="f1-table-header">
                        <th>POS.</th>
                        <th class="d-none d-md-table-cell">#</th>
                        <th>DRIVER</th>
                        <th class="d-none d-md-table-cell">NAT.</th>
                        <th>TEAM</th>
                        <th class="d-none d-lg-table-cell">WINS</th>
                        <th class="text-end">PTS.</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var m in Model.DriverStandings)
                    {
                        var rowClass = m.Position == 1 ? "f1-leader" : "";
                        <tr class="@rowClass">
                            <td>@m.Position</td>
                            <td class="d-none d-md-table-cell">@m.DriverNumber</td>
                            <td>
                                <a href="@m.DriverUrl" class="f1-link" target="_blank">@m.FirstName @m.LastName</a>
                            </td>
                            <td class="d-none d-md-table-cell">@F1CodeMapper.GetF1Code(m.CountryCode)</td>
                            <td>@m.Constructor</td>
                            <td class="d-none d-lg-table-cell">@m.Wins</td>
                            <td class="text-end">@m.Points</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
}
else
{
    <div class="alert alert-warning text-center" role="alert">
        Drivers' standings is currently unavailable.
    </div>
}